---
interface Props {
  type?: 'note' | 'info' | 'tip' | 'warning' | 'caution' | 'danger';
  title?: string;
}

const { type = 'note', title } = Astro.props;

const config = {
  note: {
    icon: 'üìù',
    defaultTitle: 'Note',
    color: '#00AA00',
    borderColor: '#00FF00',
  },
  info: {
    icon: '‚ÑπÔ∏è',
    defaultTitle: 'Info',
    color: '#60A5FA',
    borderColor: '#3B82F6',
  },
  tip: {
    icon: 'üí°',
    defaultTitle: 'Tip',
    color: '#4ADE80',
    borderColor: '#22C55E',
  },
  warning: {
    icon: '‚ö†Ô∏è',
    defaultTitle: 'Warning',
    color: '#FACC15',
    borderColor: '#EAB308',
  },
  caution: {
    icon: '‚ö°',
    defaultTitle: 'Caution',
    color: '#FB923C',
    borderColor: '#F97316',
  },
  danger: {
    icon: 'üö®',
    defaultTitle: 'Danger',
    color: '#F87171',
    borderColor: '#EF4444',
  },
};

const admonitionConfig = config[type];
const displayTitle = title || admonitionConfig.defaultTitle;
---

<div
  class={`admonition admonition-${type} border-l-4 bg-terminal-gray/50 p-4 my-6 rounded-r-md`}
  style={`border-left-color: ${admonitionConfig.borderColor};`}
>
  <div
    class="admonition-title flex items-center gap-2 font-bold mb-2"
    style={`color: ${admonitionConfig.color};`}
  >
    <span class="admonition-icon text-xl">{admonitionConfig.icon}</span>
    <span>{displayTitle}</span>
  </div>
  <div class="admonition-content text-terminal-white/90 leading-relaxed">
    <slot />
  </div>
</div>

<style>
  .admonition {
    backdrop-filter: blur(8px);
  }

  .admonition-content :global(p:last-child) {
    margin-bottom: 0;
  }

  .admonition-content :global(p) {
    margin-top: 0;
  }

  .admonition-content :global(code) {
    background-color: rgba(0, 255, 0, 0.1);
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-size: 0.9em;
  }

  .admonition-content :global(a) {
    color: var(--terminal-green);
    text-decoration: underline;
  }

  .admonition-content :global(a:hover) {
    color: var(--terminal-greenDim);
  }
</style>
